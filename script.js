const categories = [
      {
    id: "पिझ्झा",
    name: "पिझ्झा",
    items: [
      { name: "पनीर पिझ्झा ", price: 170, image: "menu card image/paneer pizza.jpeg"},
      { name: "कॉर्न पिझ्झा ", price: 160, image: "menu card image/corn pizza.jpg"},
      { name: "व्हेज पिझ्झा ", price: 150, image: "menu card image/veg pizza.jpg"}

    ]
  },

  {
    id: "मोमोज ",
    name: "मोमोज ",
   items: [ 
      { name: "स्टीम मोमोज ", price: 65, image: "menu card image/steam momo.jpg"},
      { name: "फ्राईड मोमोज ", price: 75, image: "menu card image/fried momo.jpg"},
      { name: "चीझ स्टीम मोमोज ", price: 95, image: "menu card image/cheese steam momo.webp"},
      { name: "चीझ फ्राईड मोमोज ", price: 105, image: "menu card image/chesse fried momo.webp"},
      { name: "कुरकुरे मोमोज ", price: 105, image: "menu card image/kurkure momo.jpg"}

    ]
  },

   {
    id: "रोल ",
    name: "रोल ",
  items: [
      { name: "व्हेज रोल ", price: 65, image: "menu card image/veg roll.jpg"},
      { name: "चीझ व्हेज रोल ", price: 75, image: "menu card image/veg cheese roll.jpeg"},
      { name: "पनीर रोल ", price: 75, image: "menu card image/paneer roll.jpg"},
      { name: "चीझ पनीर रोल ", price: 85, image: "menu card image/paneer roll.jpg"},
      { name: "कॉर्न रोल ", price: 85, image: "menu card image/corn roll.jpg"},
      { name: "चीझ कॉर्न रोल ", price: 105, image: "menu card image/corn roll.jpg"},
      { name: "चायनीज रोल ", price: 95, image: "menu card image/chinese roll.jpg"},
      { name: "चीझ चायनीज रोल ", price: 115, image: "img.jpg"},
      { name: "पनीर टिक्का रोल ", price: 105, image: "menu card image/paneer tikka roll.jpg"},
      { name: "चीझ पनीर टिक्का रोल ", price: 125, image: "img.jpg"}

    ]
  },

  {
    id: "फ्रेंच फ्राईज ",
    name: "फ्रेंच फ्राईज ",
    items: [
      { name: "सॉल्टेड फ्रेंच फ्राईज ", price: 75, image: "menu card image/salted fries.webp"},
      { name: "पेरी पेरी  फ्रेंच फ्राईज ", price: 85, image: "menu card image/peri peri fries.webp"}

    ]
  },

   {
    id: "टोर्नेडो ",
    name: "टोर्नेडो ",
    items: [
      { name: "प्लेन टोर्नेडो  ", price: 65, image: "menu card image/peri peri tornado.jpeg"},
      { name: "चीझ टोर्नेडो ", price: 75, image: "menu card image/peri peri tornado.jpeg"},
      { name: "कुरकुरे टोर्नेडो ", price: 105, image: "menu card image/peri peri tornado.jpeg"}

    ]
  },

  
  {
    id: "छोले भटुरे ",
    name: "छोले भटुरे ",
   items: [
      { name: "छोले भटुरे ", price: 115, image: "menu card image/chhole bhature.jpg"},
      { name: "छोले कुलचे ", price: 115, image: "menu card image/chhole kulche.jpg"},
      { name: "छोले पनीर भटुरे ", price: 125, image: "menu card image/chhole bhature.jpg"}

    ]
  },
 
   
  {
    id: "chaat",
    name: "Chaats",
    items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  },
  {
    id: "paratha",
    name: "Parathas",
    items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  },
  {
    id: "shake",
    name: "Shakes",
    items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  },
  {
    id: "beverage",
    name: "Beverages",
   items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  }
];

const cart = {};

function renderMenu() {
  const container = document.getElementById("menuContainer");
  container.innerHTML = "";

  categories.forEach(cat => {
    const row = document.createElement("div");
    row.className = "mb-4";

    row.innerHTML = `
      <h4>${cat.name}</h4>
      <div class="d-flex overflow-auto" id="${cat.id}-carousel">
        ${cat.items.map((item, i) => `
          <div class="food-card me-3 p-2 border rounded text-center" style="width: 150px;">
            <img src="${item.image}" alt="${item.name}" style="width: 100%; height: 100px; object-fit: cover;" />
            <p><strong>${item.name}</strong><br>₹${item.price}</p>
            <div class="quantity">
              <button onclick="decrease('${cat.id + i}')">-</button>
              <span id="${cat.id + i}">0</span>
              <button onclick="increase('${cat.id + i}')">+</button>
            </div>
          </div>
        `).join("")}
      </div>
    `;

    container.appendChild(row);
  });
}

function increase(id) {
  cart[id] = (cart[id] || 0) + 1;
  document.getElementById(id).textContent = cart[id];
  updateTotal();
}

function decrease(id) {
  if (cart[id]) {
    cart[id]--;
    document.getElementById(id).textContent = cart[id];
    updateTotal();
  }
}

function updateTotal() {
  let total = 0;
  let cartList = "";

  Object.keys(cart).forEach(id => {
    if (cart[id] > 0) {
      categories.forEach(cat => {
        cat.items.forEach((item, i) => {
          const itemId = cat.id + i;
          if (id === itemId) {
            const amount = item.price * cart[id];
            cartList += `<p>${item.name} x ${cart[id]} = ₹${amount}</p>`;
            total += amount;
          }
        });
      });
    }
  });

  document.getElementById('cartItems').innerHTML = cartList || "<p>Your cart is empty.</p>";
  document.getElementById('totalAmount').textContent = `Total: ₹${total}`;
}

document.getElementById("viewCartBtn").addEventListener("click", () => {
  const modal = new bootstrap.Modal(document.getElementById("cartModal"));
  modal.show();
});

document.getElementById("whatsappBtn").addEventListener("click", function (e) {
  e.preventDefault();
  const whatsappNumber = "919403201043";
  let message = "🛒 *New Order from Khaugiri Foods*:\n\n";
  let total = 0;
  let hasItems = false;

  Object.keys(cart).forEach(id => {
    if (cart[id] > 0) {
      categories.forEach(cat => {
        cat.items.forEach((item, i) => {
          const itemId = cat.id + i;
          if (id === itemId) {
            const amount = item.price * cart[id];
            message += `• ${item.name} x ${cart[id]} = ₹${amount}\n`;
            total += amount;
            hasItems = true;
          }
        });
      });
    }
  });

  if (!hasItems) {
    alert("Your cart is empty!");
    return;
  }

  message += `\n💰 *Total: ₹${total}*\n\n📦 Please confirm your order.`;
  const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
  window.open(url, "_blank");
});

window.onload = renderMenu;
